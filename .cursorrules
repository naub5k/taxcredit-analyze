# ğŸ¯ TaxCredit-Analyze í”„ë¡œì íŠ¸ ê·œì¹™ (2025-06-29 ë²„ì „)

## ğŸ“‹ **í”„ë¡œì íŠ¸ ê°œìš”**
- **í”„ë¡œì íŠ¸ëª…**: TaxCredit-Analyze (ì„¸ì•¡ê³µì œ ë¶„ì„ ì‹œìŠ¤í…œ)
- **ìœ í˜•**: React TypeScript ì›¹ì•± (Premium ë²„ì „)
- **ë°°í¬ í™˜ê²½**: Azure Static Web Apps
- **ì ‘ê·¼ ë ˆë²¨**: Premium (ì „ì²´ AI ë¶„ì„ + ì„¸ì•¡ê³µì œ ê³„ì‚°)

## ğŸš¨ **CRITICAL: 2025-06-29 í•´ê²°ëœ ë¬¸ì œ (ì ˆëŒ€ ë°˜ë³µ ê¸ˆì§€)**

### **1. MIME Type ì˜¤ë¥˜ (ê·¼ë³¸ ì›ì¸ í•´ê²°)**
```json
// âŒ ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€ (MIME ì˜¤ë¥˜ ë°œìƒ)
"homepage": "."

// âœ… ë°˜ë“œì‹œ ì‚¬ìš© (ì ˆëŒ€ ê²½ë¡œ)
"homepage": "/"
```
**ì´ìœ **: `"homepage": "."`ì€ `/dashboard/static/css/...` ê²½ë¡œë¥¼ `./static/css/...`ë¡œ ë³€ê²½í•˜ì—¬ MIME ì˜¤ë¥˜ ë°œìƒ

### **2. TypeScript ë¹Œë“œ ì˜¤ë¥˜**
```typescript
// âŒ ê¸ˆì§€: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒŒì¼ import
export type { AccessLevel } from './types';

// âœ… í•„ìˆ˜: ì§ì ‘ íƒ€ì… ì •ì˜
export type AccessLevel = 'public' | 'partner' | 'premium';
```

### **3. ë¼ìš°íŒ… ì„¤ì • (staticwebapp.config.json)**
```json
{
  "routes": [
    { "route": "/dashboard/static/*", "rewrite": "/static/{*restOfPath}" },
    { "route": "*.css", "headers": { "content-type": "text/css" } },
    { "route": "*.js", "headers": { "content-type": "application/javascript; charset=utf-8" } }
  ],
  "navigationFallback": {
    "rewrite": "/index.html",
    "exclude": ["/static/*", "*.js", "*.css", "*.json"]
  }
}
```

## ğŸ—ï¸ **ì•„í‚¤í…ì²˜ ê·œì¹™**

### **ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°**
```
src/components/
â”œâ”€â”€ shared/                    # ğŸ†• ê³µí†µ ì»´í¬ë„ŒíŠ¸ (visualê³¼ ê³µìœ )
â”‚   â”œâ”€â”€ CompanyInfo.tsx       # íšŒì‚¬ ì •ë³´ í‘œì‹œ
â”‚   â”œâ”€â”€ GrowthChart.tsx       # ì¸ì›ì¦ê° ì°¨íŠ¸
â”‚   â”œâ”€â”€ TaxCreditAnalysis.tsx # AI ë¶„ì„ (Premium ì „ìš©)
â”‚   â””â”€â”€ index.ts              # íƒ€ì… ì •ì˜ + export
â”œâ”€â”€ TaxCreditDashboard.tsx    # ë©”ì¸ ëŒ€ì‹œë³´ë“œ (2579ì¤„)
â””â”€â”€ ui/                       # ê¸°ë³¸ UI ì»´í¬ë„ŒíŠ¸
```

### **ì ‘ê·¼ ì œì–´ ì‹œìŠ¤í…œ**
```typescript
// ì ‘ê·¼ ë ˆë²¨ ì •ì˜
type AccessLevel = 'public' | 'partner' | 'premium';

// Premium ë ˆë²¨ (analyze ê¸°ë³¸ê°’)
const accessLevel: AccessLevel = 'premium';

// ì¡°ê±´ë¶€ ë Œë”ë§
{accessLevel === 'premium' && (
  <TaxCreditAnalysis 
    taxCreditData={analysisResult}
    showAnalysis={true}
  />
)}
```

## ğŸ”§ **ê°œë°œ ê·œì¹™**

### **1. ê³µí†µ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© í•„ìˆ˜**
```typescript
// âœ… í•„ìˆ˜: shared ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©
import { CompanyInfo, GrowthChart, TaxCreditAnalysis } from '../components/shared';

// âŒ ê¸ˆì§€: ì¤‘ë³µ ì»´í¬ë„ŒíŠ¸ ìƒì„±
// ë³„ë„ CompanyInfo ì»´í¬ë„ŒíŠ¸ ìƒì„± ê¸ˆì§€
```

### **2. íƒ€ì… ì •ì˜ ì¼ê´€ì„±**
```typescript
// shared/index.tsì—ì„œ íƒ€ì… ì •ì˜ í•„ìˆ˜
export type AccessLevel = 'public' | 'partner' | 'premium';

// ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ ë™ì¼í•œ íƒ€ì… ì‚¬ìš©
interface Props {
  accessLevel: AccessLevel;
}
```

### **3. API ì—°ë™ ê·œì¹™**
```typescript
// API í˜¸ì¶œ ì‹œ ë²„ì „ í™•ì¸ í•„ìˆ˜
const response = await fetch('/api/analyze');
const data = await response.json();

// API ë²„ì „ ë¡œê¹…
console.log('API Version:', data.apiInfo?.version);
```

## ğŸ¯ **ì„±ëŠ¥ ìµœì í™” ê·œì¹™**

### **1. ë²ˆë“¤ ìµœì í™”**
- **homepage**: ë°˜ë“œì‹œ `"/"` ì‚¬ìš© (ì ˆëŒ€ ê²½ë¡œ)
- **ë¹Œë“œ í¬ê¸°**: 100kB ì´í•˜ ìœ ì§€ (gzipped)
- **React Scripts**: 5.0.1 ê³ ì •

### **2. ìºì‹± ì „ëµ**
```typescript
// API ì‘ë‹µ ìºì‹±
const cacheKey = `analysis-${bizno}-${baseYear}`;
const cachedResult = localStorage.getItem(cacheKey);
```

### **3. ë©”ëª¨ë¦¬ ê´€ë¦¬**
```typescript
// ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ì²­í¬ ë‹¨ìœ„
const processInChunks = (data: any[], chunkSize = 1000) => {
  // ì²­í¬ ë‹¨ìœ„ ì²˜ë¦¬ ë¡œì§
};
```

## ğŸ”— **ì—°ë™ ê·œì¹™**

### **1. Visual í”„ë¡œì íŠ¸ ì—°ê²°**
```typescript
// visual â†’ analyze ìë™ ì´ë™
const analyzeUrl = `https://delightful-tree-001bf4c00.6.azurestaticapps.net/dashboard/${bizno}?autoAnalyze=true&expandAll=true`;
window.open(analyzeUrl, '_blank');
```

### **2. API ì„œë²„ ì—°ë™**
```typescript
// API ë² ì´ìŠ¤ URL
const API_BASE_URL = 'https://taxcredit-api-func.azurewebsites.net';

// ì—ëŸ¬ ì²˜ë¦¬ í•„ìˆ˜
try {
  const response = await fetch(`${API_BASE_URL}/api/analyze`);
  if (!response.ok) throw new Error(`HTTP ${response.status}`);
} catch (error) {
  console.error('API Error:', error);
}
```

## ğŸš€ **ë°°í¬ ê·œì¹™**

### **1. ë¹Œë“œ ì„¤ì •**
```json
// package.json í•„ìˆ˜ ì„¤ì •
{
  "homepage": "/",
  "scripts": {
    "build": "react-scripts build"
  }
}
```

### **2. í™˜ê²½ ë³€ìˆ˜**
```bash
# Azure Static Web Apps í™˜ê²½ ë³€ìˆ˜
CI=false
NODE_OPTIONS=--max_old_space_size=4096
```

### **3. ë°°í¬ ê²€ì¦**
```bash
# ë¹Œë“œ í›„ ê²€ì¦ í•„ìˆ˜
npm run build
ls build/static/css/  # CSS íŒŒì¼ ì¡´ì¬ í™•ì¸
grep "/static/" build/index.html  # ì ˆëŒ€ ê²½ë¡œ í™•ì¸
```

## ğŸ¨ **UI/UX ê·œì¹™**

### **1. Footer í‘œì‹œ ê·œì¹™**
```typescript
// ìš°ì¸¡ í•˜ë‹¨ ê³ ì • ë°°ì¹˜
<div className="fixed bottom-4 right-4 bg-blue-500 text-white px-3 py-2 rounded-lg shadow-lg text-sm">
  20250629 ì»¤ë°‹ ì ìš©ë¨
</div>
```

### **2. ì ‘ê·¼ ì œì–´ UI**
```typescript
// Premium ì „ìš© ê¸°ëŠ¥ í‘œì‹œ
{accessLevel === 'premium' ? (
  <TaxCreditAnalysis />
) : (
  <div className="relative">
    <div className="blur-sm">ë¯¸ë¦¬ë³´ê¸°</div>
    <div className="absolute inset-0 flex items-center justify-center">
      <button>Premium ì—…ê·¸ë ˆì´ë“œ</button>
    </div>
  </div>
)}
```

## ğŸ§ª **í…ŒìŠ¤íŠ¸ ê·œì¹™**

### **1. ë¹Œë“œ í…ŒìŠ¤íŠ¸**
```bash
# ë§¤ë²ˆ ë°°í¬ ì „ ì‹¤í–‰ í•„ìˆ˜
npm run build
npm run test -- --watchAll=false
```

### **2. ë¼ìš°íŒ… í…ŒìŠ¤íŠ¸**
```bash
# ë¡œì»¬ì—ì„œ ë¹Œë“œ íŒŒì¼ ì„œë¹™ í…ŒìŠ¤íŠ¸
npx serve -s build -l 3000
curl -I http://localhost:3000/dashboard/
```

## ğŸ›¡ï¸ **ë³´ì•ˆ ê·œì¹™**

### **1. ë¯¼ê° ì •ë³´ ì²˜ë¦¬**
```typescript
// ì‚¬ì—…ìë²ˆí˜¸ ë§ˆìŠ¤í‚¹
const maskBizno = (bizno: string) => {
  return bizno.replace(/(\d{3})(\d{2})(\d{5})/, '$1-$2-*****');
};
```

### **2. XSS ë°©ì§€**
```typescript
// HTML ì´ìŠ¤ì¼€ì´í”„ í•„ìˆ˜
const escapeHtml = (text: string) => {
  return text.replace(/[&<>"']/g, (match) => {
    const map: { [key: string]: string } = {
      '&': '&amp;', '<': '&lt;', '>': '&gt;',
      '"': '&quot;', "'": '&#39;'
    };
    return map[match];
  });
};
```

## ğŸ“Š **ëª¨ë‹ˆí„°ë§ ê·œì¹™**

### **1. ì„±ëŠ¥ ë¡œê¹…**
```typescript
// ë¶„ì„ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
const startTime = Date.now();
await performAnalysis();
const executionTime = Date.now() - startTime;
console.log(`Analysis completed in ${executionTime}ms`);
```

### **2. ì—ëŸ¬ ì¶”ì **
```typescript
// ì—ëŸ¬ ë°œìƒ ì‹œ ìƒì„¸ ë¡œê¹…
window.addEventListener('error', (event) => {
  console.error('Global Error:', {
    message: event.message,
    filename: event.filename,
    lineno: event.lineno,
    colno: event.colno
  });
});
```

## ğŸ”„ **Git ì‘ì—… ê·œì¹™**

### **1. ì»¤ë°‹ ë©”ì‹œì§€**
```bash
# í˜•ì‹: type(scope): description
feat(dashboard): add Premium access control
fix(mime): resolve CSS loading issue with homepage setting
perf(api): optimize analysis response time
```

### **2. ë°°í¬ ë¸Œëœì¹˜**
```bash
# master ë¸Œëœì¹˜ë¡œ ìë™ ë°°í¬
git checkout master
git merge feature/your-feature
git push origin master  # ìë™ ë°°í¬ íŠ¸ë¦¬ê±°
```

## ğŸ“ˆ **ì„±ê³¼ ì¸¡ì • ê·œì¹™**

### **1. ì½”ë“œ í’ˆì§ˆ**
- **ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ë¥ **: 100% (visualê³¼ ê³µìœ )
- **íƒ€ì… ì•ˆì „ì„±**: TypeScript strict ëª¨ë“œ
- **ë¹Œë“œ í¬ê¸°**: 100kB ì´í•˜ (gzipped)

### **2. ì„±ëŠ¥ ì§€í‘œ**
- **ì´ˆê¸° ë¡œë”©**: 3ì´ˆ ì´í•˜
- **ë¶„ì„ ì‹¤í–‰**: 1ì´ˆ ì´í•˜
- **API ì‘ë‹µ**: 800ms ì´í•˜

---

## âš ï¸ **ì¤‘ìš” ê¸ˆì§€ì‚¬í•­**

1. **ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€**: `"homepage": "."`
2. **íƒ€ì… íŒŒì¼ import ê¸ˆì§€**: `from './types'` (ì¡´ì¬í•˜ì§€ ì•ŠìŒ)
3. **ê°œë³„ ì»´í¬ë„ŒíŠ¸ ìƒì„± ê¸ˆì§€**: shared ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© í•„ìˆ˜
4. **ë¼ìš°íŒ… ì„¤ì • ë³€ê²½ ê¸ˆì§€**: staticwebapp.config.json ê³ ì •
5. **ë¹Œë“œ í´ë” .gitignore ê¸ˆì§€**: Azure ë°°í¬ ìœ„í•´ í¬í•¨ í•„ìš”

---

**ğŸ“Œ ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-06-29 00:45 | **ë²„ì „**: v0.1.1 | **ìƒíƒœ**: ï¿½ï¿½ Production Ready 