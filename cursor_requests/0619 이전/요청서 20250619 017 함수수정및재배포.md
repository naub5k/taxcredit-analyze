# 요청서\_20250619\_017 — getPensionStatus 함수 수정 및 재배포 지시

## 🧾 작업 목적

`요청서_20250619_016`에서 정의한 기준에 따라, Azure Function `getPensionStatus`의 오류 응답 코드를 `HTTP 500 → 200`으로 수정하는 내용이 **아직 반영되지 않음**. 본 요청서는 해당 함수 로직을 수정하고, 수정 완료 후 Azure에 재배포하는 작업을 명시함.

---

## 📌 현재 상황 요약

* `PensionInfoBlock`에서 사업자번호(`1248155381`)로 호출 시 500 오류 발생
* 콘솔에서 반복적으로 `HTTP error! status: 500` 출력 중
* 원인은 `resultCode !== '00'`일 때 강제로 `status: 500` 반환하는 기존 함수 코드
* `git diff` 기준 해당 로직 수정된 흔적 없음 → 아직 미반영 상태 확인됨

---

## 🛠️ 작업 지시사항

### 1. `getPensionStatus` 함수 로직 수정

```ts
// 기존 코드
if (resultCode !== '00') {
  context.res = {
    status: 500,
    body: {
      success: false,
      error: `국민연금 API 오류: ${resultCode} - ${resultMsg}`,
    },
  };
  return;
}

// 수정 후
if (resultCode !== '00') {
  context.res = {
    status: 200,
    body: {
      success: false,
      error: `국민연금 API 오류: ${resultCode} - ${resultMsg}`,
    },
  };
  return;
}
```

### 2. Azure Function 재배포

```bash
func azure functionapp publish taxcredit-api-func
```

---

## 📂 관련 요청서 및 기준

* `요청서_20250619_016`: 500 → 200 수정 기준 정의
* `요청서_20250619_015`: UI 오류 발생 원인 분석 및 흐름 복구

---

> 🎯 본 요청은 UI 연동 오류 해결의 핵심 단계로, 수정 후 반드시 배포까지 완료할 것. 이후 UI에서는 더 이상 500 오류가 발생하지 않고, `error` 메시지를 통해 사용자에게 원인을 안내할 수 있음.
