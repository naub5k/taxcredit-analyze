계산식 오류 점검이야. UI 점검. 사후관리 조건에 따른 환수 또는 신청대상에서 제외 해야 되는 항목에 대한 내용이야. 

 제공해주신 (주)소프트체인의 연도별 인원 변동 현황과 앞선 대화 및 소스들을 바탕으로, 2019년 귀속분에 대한 경정청구 가능 여부 및 2차년도, 3차년도 혜택에 대해 설명해 드리겠습니다.

(주)소프트체인의 연도별 상시근로자 수 현황 (기준연도 2016년 13명)은 다음과 같습니다:
*   2017년: 11명 (-2명)
*   2018년: 12명 (+1명)
*   **2019년: 14명 (+2명)**
*   2020년: 15명 (+1명)
*   2021년: 14명 (-1명)
*   2022년: 15명 (+1명)
*   2023년: 16명 (+1명)
*   2024년: 14명 (-2명)
*   2025년: 16명 (+2명)

**1. 2019년 귀속분 고용 증대 세액 공제 혜택 가능성 (과거 시점)**

(주)소프트체인이 중소기업에 해당한다고 가정하면, 2019년에 상시근로자 수가 직전 연도(2018년 12명) 대비 **+2명 증가** (14명)했으므로 [데이터], 2019년 귀속분에 대해 고용 증대 세액 공제 대상에 해당합니다. 중소기업은 최초 증가가 발생한 과세연도(2019년)부터 **3년간** 세액 공제를 받을 수 있습니다. 따라서 2019년 증가분에 대해 2019년(1차년도), 2020년(2차년도), 2021년(3차년도)의 혜택이 가능했을 것입니다.

**2. 2019년 증가분에 대한 사후관리 검토**

고용 증대 세액 공제는 고용 유지를 전제로 하며, 최초 공제받은 과세연도(2019년) 종료일로부터 **2년 이내 (즉, 2020년과 2021년)** 에 상시근로자 수가 최초 공제받은 과세연도(2019년) 대비 감소하면 공제받은 세액을 추징당할 수 있습니다.

*   2020년 상시근로자 수: 15명 [데이터]. 2019년(14명) 대비 증가했습니다 (+1명).
*   2021년 상시근로자 수: 14명 [데이터]. 2019년(14명)과 동일합니다 (0명).

사후관리 규정에 따르면, 최초 공제받은 과세연도(2019년)에 비하여 상시근로자 수가 감소했는지를 판단합니다. 2020년(15명)과 2021년(14명) 모두 2019년(14명) 대비 감소하지 않았으므로, 2019년 증가분에 대한 사후관리 요건은 충족된 것으로 판단됩니다. 즉, **사후관리에 따른 추징 위험 없이 2019년, 2020년, 2021년 3년간의 혜택이 유효했을 것입니다.**

*(참고: 코로나19 유예 규정은 2020년에 고용 감소가 발생한 경우에 한하여 2019년 증가분에 대한 사후관리를 1년 유예하는 내용으로, 2020년에는 고용이 증가했으므로 직접적으로 해당되지 않습니다).*

**3. 오늘 시점 (2025년 5월 가정) 에서의 경정청구 가능성**

경정청구는 법정 신고 기한이 지난 후 **5년 이내**에 할 수 있습니다.
*   2019년 귀속 법인세 신고 기한은 일반적으로 2020년 3월 31일입니다.
*   따라서 2019년 귀속분에 대한 경정청구 기한은 **2020년 3월 31일로부터 5년 후인 2025년 3월 31일**입니다.

오늘 시점을 2025년 5월로 가정했으므로, 2019년 귀속분에 대한 경정청구 기한은 **이미 지났습니다.**

**4. 결론**

(주)소프트체인은 상시근로자 수 변동 데이터에 따르면 2019년 상시근로자 증가에 따른 고용 증대 세액 공제 혜택 (1차: 2019년, 2차: 2020년, 3차: 2021년)에 대해 사후관리 요건을 충족하여 이론적으로 3년간 혜택을 받을 수 있었을 것입니다.

하지만, 2019년 귀속분에 대한 법인세 신고 기한(2020년 3월 31일)으로부터 5년이 지난 오늘 시점(2025년 5월)에서는 **경정청구 기한이 만료되어 해당 귀속연도 (2019년) 및 그에 따른 2차년도 (2020년), 3차년도 (2021년) 혜택에 대하여 경정청구를 통해 환급받는 것은 불가능합니다.**

경정청구는 해당 귀속연도의 과세표준 및 세액을 다시 계산하여 청구하는 것이므로, 2차년도, 3차년도 혜택을 받기 위해서는 최초 증가가 발생한 1차년도 (2019년)에 대한 경정청구가 선행되어야 합니다. 1차년도에 대한 경정청구 기한이 지났으므로, 후속 연도의 혜택 또한 소급 적용받을 수 없습니다.

---

## 🛠️ **경정청구 기한 수정 완료** (2025.06.08)

### 🚨 **발견된 문제**:
- 기존 코드에서 경정청구 기한을 각 연도별로 1년씩 늘려서 계산
- 1차년도: +6년, 2차년도: +7년, 3차년도: +8년 (❌ 잘못된 계산)

### ✅ **수정된 올바른 로직**:
- **모든 연도(1차, 2차, 3차)의 경정청구 기한이 1차년도 기준으로 동일**
- 1차년도: +6년, 2차년도: +6년, 3차년도: +6년 (✅ 올바른 계산)

### 📋 **수정된 파일**:
1. `taxcredit-analyze/src/components/TaxCreditDashboard.tsx`
2. `taxcredit-analyze/src/components/TaxCreditDashboard_ORIGINAL_BACKUP.tsx`  
3. `taxcredit-api-func/analyze/index.js`
4. `taxcredit-analyze/src/services/taxCreditService.js`

### 🔧 **핵심 수정 내용**:
```javascript
// ❌ 기존 잘못된 계산
year1: { deadline: new Date(baseYear + 6, 4, 31) },  // +6년
year2: { deadline: new Date(baseYear + 7, 4, 31) },  // +7년  
year3: { deadline: new Date(baseYear + 8, 4, 31) }   // +8년

// ✅ 수정된 올바른 계산
const amendmentDeadline = new Date(baseYear + 6, 2, 31); // 1차년도 기준 고정
year1: { deadline: amendmentDeadline },  // +6년
year2: { deadline: amendmentDeadline },  // +6년 (1차와 동일)
year3: { deadline: amendmentDeadline }   // +6년 (1차와 동일)
```

### 📅 **법적 근거**:
- 경정청구는 해당 귀속연도(1차년도)의 과세표준 및 세액을 다시 계산하여 청구
- 2차년도, 3차년도 혜택은 1차년도 경정청구에 포함되어 처리
- 1차년도 경정청구 기한 만료 시 모든 연도 혜택 소급 적용 불가

### 🎯 **결과**:
이제 UI에서 **정확한 경정청구 기한**이 표시되며, 2차년도와 3차년도 혜택도 1차년도와 동일한 기한으로 적용됩니다.

---

## 📅 **2020년 데이터 시작점 수정 완료** (2025.06.08)

### 🎯 **배경**:
- 2019년 이전 데이터는 **경정청구 기한이 만료**되어 실질적 의미 없음
- 2025년 현재 시점에서 **2020년 이후만 경정청구 가능**

### 🛠️ **수정된 연도 범위**:
- **기존**: 2016-2025년 (10년간)
- **수정**: 2020-2025년 (6년간) ✅

### 📋 **수정된 파일 목록**:
#### **API 함수 (taxcredit-api-func)**:
1. `analyzeCompanyData/index.js` - 데이터 조회 범위 수정
2. `analyze/index.js` - 분석 범위 수정  
3. `direct-test.js` - 테스트 데이터 범위 수정

#### **분석 앱 (taxcredit-analyze)**:
4. `src/services/taxCreditService.js` - 서비스 레이어 수정
5. `src/components/TaxCreditDashboard.tsx` - 메인 대시보드 수정
6. `src/components/TaxCreditDashboard_ORIGINAL_BACKUP.tsx` - 백업 파일 수정
7. `src/pages/CompanyDetail.tsx` - 테이블 컬럼 수정

#### **시각화 앱 (taxcredit-visual)**:
8. `my-app/src/pages/CompanyDetailPage.js` - 연도 범위 수정
9. `my-app/src/components/CompanyDescriptionBlock.js` - 설명 텍스트 수정

### 🔧 **핵심 수정 내용**:
```javascript
// ❌ 기존 범위
for (let year = 2016; year <= 2025; year++) {

// ✅ 수정된 범위  
// 🚨 **2020년부터 시작 (2019년 이전은 경정청구 기한 만료)**
for (let year = 2020; year <= 2025; year++) {
```

### 📊 **샘플 데이터 수정**:
```javascript
// ❌ 기존 샘플 데이터
employeeData: {
  '2016': 8, '2017': 8, '2018': 8, '2019': 11, '2020': 15, ...
}

// ✅ 수정된 샘플 데이터 (2019년은 기준년도로 유지)
employeeData: {
  '2019': 11, '2020': 15, '2021': 15, '2022': 15, ...
}
```

### 📈 **효과**:
- **의미 없는 데이터 제거**: 경정청구 불가능한 2016-2018년 데이터 제거
- **성능 향상**: 처리해야 할 데이터 연도 수 40% 감소 (10년→6년)
- **사용자 경험 개선**: 실제 신청 가능한 연도만 표시하여 혼동 방지
- **정확성 향상**: 현실적으로 의미 있는 데이터만 분석

### ⚖️ **법적 근거**:
- **경정청구 기한**: 법정 신고기한으로부터 5년
- **2019년 귀속**: 2025년 3월 31일 만료 ❌
- **2020년 이후**: 경정청구 가능 ✅

이제 **모든 앱이 2020년부터 시작**하여 실질적으로 경정청구 가능한 연도만 처리합니다! 🎯