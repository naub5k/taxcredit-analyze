# 작업요청서\_20250618\_009 — 웹앱 UI에 국민연금 가입 인원 정보 블럭 추가

## 1. 요청 개요

* **목적**: `taxcredit-analyze` React 웹앱 내 회사 상세 정보 하단에 **"국민연금 가입 인원 정보"** UI 블럭을 추가하고, 사업자등록번호 기반으로 공공데이터포털 API를 호출해 **가입자 수를 함께 조회**합니다.
* **요청자**: 유비
* **수행자**: Cursor

## 2. 작업 범위

| 번호  | 내용            | 상세                                                                                                                                                                                                                                                                                                                                                                          |
| --- | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 2-1 | 📦 백엔드 함수 추가  | `/api/getPensionStatus/index.js`<br>• 입력: 사업자등록번호(`bizNo`)<br>• 처리: `getBassInfoSearchV2` → `seq` 추출 → `getPdAcctoSttusInfoSearchV2`로 가입자수 조회<br>• 출력: `{ 사업장명, 가입자수, 기준년월, 사업자등록번호 }` JSON 응답<br>• **주의**:<br>  - 입력한 `bizNo`와 API 응답의 `bzowrRgstNo`(마스킹) 비교는 불가함<br>  - 따라서 최종 반환 결과에는 **입력값 기준의 `사업자등록번호`를 다시 포함하여 응답**<br>  - 마스킹된 값을 사용자에게 보여줄 때는 **입력값을 그대로 대체하여 사용** |
| 2-2 | 🧱 UI 컴포넌트 추가 | 회사 정보 컴포넌트 하단에 "국민연금 가입 인원 정보" 블럭 추가<br>• 입력 필드 (사업자등록번호)<br>• 버튼 클릭 → 가입자 수 fetch<br>• 응답값 표시: "가입자수: 27명"                                                                                                                                                                                                                                                                 |
| 2-3 | ⚙️ 환경변수 설정    | 공공데이터포털에서 발급받은 API 키는 `PENSION_API_KEY` 환경변수로 설정<br>• 현재 사용 중인 인증키:<br>`PENSION_API_KEY = yVgPIhBGn7aoLE2a9ZRnIdUUF7DSC/qx2w3qQhrL/b9UcCNwOUNowpvBsAsk9QXsilv2g9AsB6JvMRYiBOAhg==`                                                                                                                                                                                          |

## 3. 화면 예시

```
[회사 상세 정보 컴포넌트]
 └ 사업자번호: 1234567890
 └ 주소: 서울시 강남구 ...

[ 국민연금 가입 인원 정보 ]
 [사업자등록번호] [ 조회하기 ]
 가입자수: 27명 (2025년 6월 기준)
```

## 4. 체크리스트 (작성: Cursor / 검토: GPT)

* [ ] API 경로: `/api/getPensionStatus` 로 접근 가능해야 함
* [ ] 환경변수 하드코딩 금지 (`process.env.PENSION_API_KEY` 사용)
* [ ] 프론트 fetch 경로와 백엔드 연동 정상 동작 확인
* [ ] UI 정렬 및 텍스트 일관성 유지
* [ ] React 상태 업데이트 오류 없음
* [ ] 응답 결과의 `사업장명` 등으로 입력값 검증 또는 유효성 안내 처리
* [ ] API 응답의 마스킹된 사업자번호 대신 **입력값을 반환 응답에 포함하여 표시** 처리

## 5. 완료 기준

* 국민연금 블럭이 "회사 정보 하단"에 표시되고
* 등록번호 입력 → 가입자수 정상 출력되며
* 오류 없이 API 연동 동작할 것

---

> *이 요청은 "기능 확장" 목적이며, 전체 UI 구조는 변경하지 않고 부분 블럭으로만 구성합니다.*
